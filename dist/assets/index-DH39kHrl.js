var kl=Object.defineProperty;var yl=(t,e,l)=>e in t?kl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var pt=(t,e,l)=>yl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function l(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=l(s);fetch(s.href,o)}})();function G(){}function ul(t){return t()}function $t(){return Object.create(null)}function fe(t){t.forEach(ul)}function vt(t){return typeof t=="function"}function re(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Cl(t){return Object.keys(t).length===0}function Al(t,...e){if(t==null){for(const n of e)n(void 0);return G}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function at(t,e,l){t.$$.on_destroy.push(Al(e,l))}function Se(t){return t??""}function Sl(t){return t&&vt(t.destroy)?t.destroy:G}function i(t,e){t.appendChild(e)}function O(t,e,l){t.insertBefore(e,l||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function Ue(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function f(t){return document.createElement(t)}function b(t){return document.createTextNode(t)}function v(){return b(" ")}function rt(){return b("")}function z(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function ct(t){return function(e){return e.preventDefault(),t.call(this,e)}}function c(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function El(t){return Array.from(t.childNodes)}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function Y(t,e){t.value=e??""}function Q(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function jt(t,e,l){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}(!l||e!==void 0)&&(t.selectedIndex=-1)}function wl(t){const e=t.querySelector(":checked");return e&&e.__value}function Ol(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let He;function Be(t){He=t}function bt(){if(!He)throw new Error("Function called outside component initialization");return He}function Dl(t){bt().$$.on_mount.push(t)}function Rl(t){bt().$$.on_destroy.push(t)}function fl(){const t=bt();return(e,l,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=Ol(e,l,{cancelable:n});return s.slice().forEach(a=>{a.call(t,o)}),!o.defaultPrevented}return!0}}const Pe=[],Ft=[];let Me=[];const qt=[],Il=Promise.resolve();let ht=!1;function Nl(){ht||(ht=!0,Il.then(pl))}function it(t){Me.push(t)}const mt=new Set;let Te=0;function pl(){if(Te!==0)return;const t=He;do{try{for(;Te<Pe.length;){const e=Pe[Te];Te++,Be(e),Tl(e.$$)}}catch(e){throw Pe.length=0,Te=0,e}for(Be(null),Pe.length=0,Te=0;Ft.length;)Ft.pop()();for(let e=0;e<Me.length;e+=1){const l=Me[e];mt.has(l)||(mt.add(l),l())}Me.length=0}while(Pe.length);for(;qt.length;)qt.pop()();ht=!1,mt.clear(),Be(t)}function Tl(t){if(t.fragment!==null){t.update(),fe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(it)}}function Ll(t){const e=[],l=[];Me.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),Me=e}const st=new Set;let we;function ml(){we={r:0,c:[],p:we}}function hl(){we.r||fe(we.c),we=we.p}function te(t,e){t&&t.i&&(st.delete(t),t.i(e))}function ne(t,e,l,n){if(t&&t.o){if(st.has(t))return;st.add(t),we.c.push(()=>{st.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function ue(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ae(t){t&&t.c()}function ce(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),it(()=>{const o=t.$$.on_mount.map(ul).filter(vt);t.$$.on_destroy?t.$$.on_destroy.push(...o):fe(o),t.$$.on_mount=[]}),s.forEach(it)}function de(t,e){const l=t.$$;l.fragment!==null&&(Ll(l.after_update),fe(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Pl(t,e){t.$$.dirty[0]===-1&&(Pe.push(t),Nl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pe(t,e,l,n,s,o,a=null,u=[-1]){const r=He;Be(t);const d=t.$$={fragment:null,ctx:[],props:o,update:G,not_equal:s,bound:$t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:$t(),dirty:u,skip_bound:!1,root:e.target||r.$$.root};a&&a(d.root);let p=!1;if(d.ctx=l?l(t,e.props||{},(m,S,..._)=>{const k=_.length?_[0]:S;return d.ctx&&s(d.ctx[m],d.ctx[m]=k)&&(!d.skip_bound&&d.bound[m]&&d.bound[m](k),p&&Pl(t,m)),S}):[],d.update(),p=!0,fe(d.before_update),d.fragment=n?n(d.ctx):!1,e.target){if(e.hydrate){const m=El(e.target);d.fragment&&d.fragment.l(m),m.forEach(w)}else d.fragment&&d.fragment.c();e.intro&&te(t.$$.fragment),ce(t,e.target,e.anchor),pl()}Be(r)}class me{constructor(){pt(this,"$$");pt(this,"$$set")}$destroy(){de(this,1),this.$destroy=G}$on(e,l){if(!vt(l))return G;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Cl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ml="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ml);const Le=[];function _l(t,e=G){let l;const n=new Set;function s(u){if(re(t,u)&&(t=u,l)){const r=!Le.length;for(const d of n)d[1](),Le.push(d,t);if(r){for(let d=0;d<Le.length;d+=2)Le[d][0](Le[d+1]);Le.length=0}}}function o(u){s(u(t))}function a(u,r=G){const d=[u,r];return n.add(d),n.size===1&&(l=e(s,o)||G),u(t),()=>{n.delete(d),n.size===0&&l&&(l(),l=null)}}return{set:s,update:o,subscribe:a}}const Vt=localStorage.getItem("mt_token"),$l=JSON.parse(localStorage.getItem("mt_me")||"null"),dt=_l({isAuthenticated:!!Vt,token:Vt||null,me:$l||null});function jl(t,e){t?localStorage.setItem("mt_token",t):localStorage.removeItem("mt_token"),e?localStorage.setItem("mt_me",JSON.stringify(e)):localStorage.removeItem("mt_me"),dt.set({isAuthenticated:!!t,token:t||null,me:e||null})}function Fl(){localStorage.removeItem("mt_token"),localStorage.removeItem("mt_me"),dt.set({isAuthenticated:!1,token:null,me:null})}const zt="http://localhost:5078".replace(/\/$/,""),ql="/api";async function _t(t,e,l={}){const n=localStorage.getItem("mt_token"),s={"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`},...l.headers},o=await fetch(`${t}${e}`,{...l,headers:s}),a=o.headers.get("content-type")||"",u=await o.text(),r=a.includes("application/json");let d=u;if(r&&u)try{d=JSON.parse(u)}catch{}if(!o.ok)throw new Error((typeof d=="string"?d:d==null?void 0:d.message)||`HTTP ${o.status}`);return d}async function Vl({username:t,email:e,password:l,role:n}){const s="http://localhost:5078".replace(/\/$/,""),o=await fetch(`${s}/api/users/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,email:e,password:l,role:n})}),u=(o.headers.get("content-type")||"").includes("application/json")?await o.json():await o.text();if(!o.ok)throw new Error(typeof u=="string"?u:(u==null?void 0:u.message)||`HTTP ${o.status}`);return u}async function zl(t,e){const l=await _t(zt,"/api/users/login",{method:"POST",body:JSON.stringify({username:t,password:e})}),n=l&&typeof l=="object"?l.token:l;if(!n)throw new Error("Respuesta de login sin token");localStorage.setItem("mt_token",n);let s=null;try{s=await _t(zt,"/api/users/me")}catch{const o=l==null?void 0:l.user;o&&(s={username:o.username,email:o.email,role:o.role})}s&&localStorage.setItem("mt_me",JSON.stringify(s));try{jl(n,s)}catch{}return{token:n,me:s}}function Gl(t,e=10){return _t(ql,`/Customers/search?q=${encodeURIComponent(t)}&take=${e}`)}const Bl=["Vendedor","Coordinador","Programador","Almacen","Calidad","Tecnico Instalador","Soporte Tecnico","Facturacion","Administrador"],vl={Vendedor:"Vendedor",Coordinador:"Coordinador",Programador:"Programador",Almacen:"Almac√©n",Calidad:"Calidad","Tecnico Instalador":"T√©cnico Instalador","Soporte Tecnico":"Soporte T√©cnico",Facturacion:"Facturaci√≥n",Administrador:"Administrador"};function Hl(t,e,l){const n=t.slice();return n[12]=e[l],n}function Ul(t){let e;return{c(){e=f("option"),e.textContent=`${vl[t[12]]??t[12]}`,e.__value=t[12],Y(e,e.__value)},m(l,n){O(l,e,n)},p:G,d(l){l&&w(e)}}}function Gt(t){let e,l;return{c(){e=f("p"),l=b(t[5]),c(e,"class","error svelte-1c6mxj6")},m(n,s){O(n,e,s),i(e,l)},p(n,s){s&32&&$(l,n[5])},d(n){n&&w(e)}}}function Bt(t){let e,l;return{c(){e=f("p"),l=b(t[6]),c(e,"class","ok svelte-1c6mxj6")},m(n,s){O(n,e,s),i(e,l)},p(n,s){s&64&&$(l,n[6])},d(n){n&&w(e)}}}function Ht(t){let e;return{c(){e=b("Creando‚Ä¶")},m(l,n){O(l,e,n)},d(l){l&&w(e)}}}function Ut(t){let e;return{c(){e=b("Crear cuenta")},m(l,n){O(l,e,n)},d(l){l&&w(e)}}}function Jl(t){let e,l,n,s,o,a,u,r,d,p,m,S,_,k,g,h,I,N,C,P,D,E,A,B,U,V,K=ue(Bl),H=[];for(let T=0;T<K.length;T+=1)H[T]=Ul(Hl(t,K,T));let M=t[5]&&Gt(t),j=t[6]&&Bt(t),R=t[4]&&Ht(),y=!t[4]&&Ut();return{c(){e=f("form"),l=f("h1"),l.textContent="Crear cuenta",n=v(),s=f("label"),o=b(`Usuario\r
    `),a=f("input"),u=v(),r=f("label"),d=b(`Correo\r
    `),p=f("input"),m=v(),S=f("label"),_=b(`Contrase√±a\r
    `),k=f("input"),g=v(),h=f("label"),I=b(`Rol\r
    `),N=f("select"),C=f("option"),C.textContent="Selecciona un rol‚Ä¶";for(let T=0;T<H.length;T+=1)H[T].c();P=v(),M&&M.c(),D=v(),j&&j.c(),E=v(),A=f("button"),R&&R.c(),B=rt(),y&&y.c(),c(a,"type","text"),a.required=!0,c(a,"maxlength","100"),c(a,"class","svelte-1c6mxj6"),c(s,"class","svelte-1c6mxj6"),c(p,"type","email"),p.required=!0,c(p,"maxlength","200"),c(p,"class","svelte-1c6mxj6"),c(r,"class","svelte-1c6mxj6"),c(k,"type","password"),k.required=!0,c(k,"minlength","6"),c(k,"class","svelte-1c6mxj6"),c(S,"class","svelte-1c6mxj6"),C.__value="",Y(C,C.__value),C.disabled=!0,C.selected=!0,N.required=!0,c(N,"class","svelte-1c6mxj6"),t[3]===void 0&&it(()=>t[11].call(N)),c(h,"class","svelte-1c6mxj6"),c(A,"type","submit"),A.disabled=t[4],c(A,"class","svelte-1c6mxj6"),c(e,"class","register svelte-1c6mxj6")},m(T,L){O(T,e,L),i(e,l),i(e,n),i(e,s),i(s,o),i(s,a),Y(a,t[0]),i(e,u),i(e,r),i(r,d),i(r,p),Y(p,t[1]),i(e,m),i(e,S),i(S,_),i(S,k),Y(k,t[2]),i(e,g),i(e,h),i(h,I),i(h,N),i(N,C);for(let X=0;X<H.length;X+=1)H[X]&&H[X].m(N,null);jt(N,t[3],!0),i(e,P),M&&M.m(e,null),i(e,D),j&&j.m(e,null),i(e,E),i(e,A),R&&R.m(A,null),i(A,B),y&&y.m(A,null),U||(V=[z(a,"input",t[8]),z(p,"input",t[9]),z(k,"input",t[10]),z(N,"change",t[11]),z(e,"submit",ct(t[7]))],U=!0)},p(T,[L]){L&1&&a.value!==T[0]&&Y(a,T[0]),L&2&&p.value!==T[1]&&Y(p,T[1]),L&4&&k.value!==T[2]&&Y(k,T[2]),L&8&&jt(N,T[3]),T[5]?M?M.p(T,L):(M=Gt(T),M.c(),M.m(e,D)):M&&(M.d(1),M=null),T[6]?j?j.p(T,L):(j=Bt(T),j.c(),j.m(e,E)):j&&(j.d(1),j=null),T[4]?R||(R=Ht(),R.c(),R.m(A,B)):R&&(R.d(1),R=null),T[4]?y&&(y.d(1),y=null):y||(y=Ut(),y.c(),y.m(A,null)),L&16&&(A.disabled=T[4])},i:G,o:G,d(T){T&&w(e),Ue(H,T),M&&M.d(),j&&j.d(),R&&R.d(),y&&y.d(),U=!1,fe(V)}}}function Kl(t,e,l){let n="",s="",o="",a="",u=!1,r="",d="";async function p(g){if(g.preventDefault(),l(5,r=""),l(6,d=""),!a){l(5,r="Selecciona un rol");return}l(4,u=!0);try{const h=await Vl({username:n,email:s,password:o,role:a});l(6,d="Usuario registrado. Ahora puedes iniciar sesi√≥n."),setTimeout(()=>window.location.assign("/login"),900)}catch(h){l(5,r=(h==null?void 0:h.message)||"No se pudo registrar")}finally{l(4,u=!1)}}function m(){n=this.value,l(0,n)}function S(){s=this.value,l(1,s)}function _(){o=this.value,l(2,o)}function k(){a=wl(this),l(3,a)}return[n,s,o,a,u,r,d,p,m,S,_,k]}class Yl extends me{constructor(e){super(),pe(this,e,Kl,Jl,re,{})}}function Zl(t){let e,l,n,s,o,a,u,r,d,p,m,S,_,k,g,h,I,N,C=t[3]&&Jt(t),P=t[2]&&Kt(),D=!t[2]&&Yt();return{c(){e=f("form"),l=f("h1"),l.textContent="Iniciar sesi√≥n",n=v(),s=f("label"),o=b(`usuario\r
      `),a=f("input"),u=v(),r=f("label"),d=b(`Contrase√±a\r
      `),p=f("input"),m=v(),C&&C.c(),S=v(),_=f("a"),_.textContent="Crear cuenta nueva",k=v(),g=f("button"),P&&P.c(),h=v(),D&&D.c(),c(a,"type","text"),a.required=!0,c(p,"type","password"),p.required=!0,c(_,"href","#/register"),c(g,"type","submit"),g.disabled=t[2],c(g,"class","svelte-1sk9tho"),c(e,"class","login svelte-1sk9tho")},m(E,A){O(E,e,A),i(e,l),i(e,n),i(e,s),i(s,o),i(s,a),Y(a,t[0]),i(e,u),i(e,r),i(r,d),i(r,p),Y(p,t[1]),i(e,m),C&&C.m(e,null),i(e,S),i(e,_),i(e,k),i(e,g),P&&P.m(g,null),i(g,h),D&&D.m(g,null),I||(N=[z(a,"input",t[6]),z(p,"input",t[7]),z(e,"submit",ct(t[5]))],I=!0)},p(E,A){A&1&&a.value!==E[0]&&Y(a,E[0]),A&2&&p.value!==E[1]&&Y(p,E[1]),E[3]?C?C.p(E,A):(C=Jt(E),C.c(),C.m(e,S)):C&&(C.d(1),C=null),E[2]?P||(P=Kt(),P.c(),P.m(g,h)):P&&(P.d(1),P=null),E[2]?D&&(D.d(1),D=null):D||(D=Yt(),D.c(),D.m(g,null)),A&4&&(g.disabled=E[2])},i:G,o:G,d(E){E&&w(e),C&&C.d(),P&&P.d(),D&&D.d(),I=!1,fe(N)}}}function Ql(t){let e,l;return e=new Yl({}),{c(){Ae(e.$$.fragment)},m(n,s){ce(e,n,s),l=!0},p:G,i(n){l||(te(e.$$.fragment,n),l=!0)},o(n){ne(e.$$.fragment,n),l=!1},d(n){de(e,n)}}}function Jt(t){let e,l;return{c(){e=f("p"),l=b(t[3]),c(e,"class","error svelte-1sk9tho")},m(n,s){O(n,e,s),i(e,l)},p(n,s){s&8&&$(l,n[3])},d(n){n&&w(e)}}}function Kt(t){let e;return{c(){e=b("Entrando...")},m(l,n){O(l,e,n)},d(l){l&&w(e)}}}function Yt(t){let e;return{c(){e=b("Entrar")},m(l,n){O(l,e,n)},d(l){l&&w(e)}}}function Wl(t){let e,l,n,s;const o=[Ql,Zl],a=[];function u(r,d){return r[4]==="register"?0:1}return e=u(t),l=a[e]=o[e](t),{c(){l.c(),n=rt()},m(r,d){a[e].m(r,d),O(r,n,d),s=!0},p(r,[d]){let p=e;e=u(r),e===p?a[e].p(r,d):(ml(),ne(a[p],1,1,()=>{a[p]=null}),hl(),l=a[e],l?l.p(r,d):(l=a[e]=o[e](r),l.c()),te(l,1),l.m(n.parentNode,n))},i(r){s||(te(l),s=!0)},o(r){ne(l),s=!1},d(r){r&&w(n),a[e].d(r)}}}function Xl(t,e,l){let n="",s="",o=!1,a="",u=location.hash==="#/register"?"register":"login";const r=()=>l(4,u=location.hash==="#/register"?"register":"login");Dl(()=>window.addEventListener("hashchange",r)),Rl(()=>window.removeEventListener("hashchange",r));async function d(S){S.preventDefault(),l(3,a=""),l(2,o=!0);try{await zl(n,s),location.hash&&(location.hash="")}catch(_){l(3,a=(_==null?void 0:_.message)||"No se pudo iniciar sesi√≥n")}finally{l(2,o=!1)}}function p(){n=this.value,l(0,n)}function m(){s=this.value,l(1,s)}return[n,s,o,a,u,d,p,m]}class xl extends me{constructor(e){super(),pe(this,e,Xl,Wl,re,{})}}function Zt(t,e,l){const n=t.slice();return n[1]=e[l],n}function Qt(t){let e;return{c(){e=f("a"),e.textContent=`${t[1]}`,c(e,"href","https://www.google.com/"),c(e,"class","nav-link svelte-1jw0d6k")},m(l,n){O(l,e,n)},p:G,d(l){l&&w(e)}}}function en(t){let e,l,n,s,o,a,u,r,d=ue(t[0]),p=[];for(let m=0;m<d.length;m+=1)p[m]=Qt(Zt(t,d,m));return{c(){e=f("header"),l=f("div"),n=f("div"),s=f("div"),s.innerHTML='<div class="logo-icon svelte-1jw0d6k"><span class="logo-m svelte-1jw0d6k">M</span> <div class="antenna svelte-1jw0d6k"></div></div> <div class="logo-text svelte-1jw0d6k"><h1 class="svelte-1jw0d6k">MASTERTRACK</h1> <p class="svelte-1jw0d6k">El Sistema de Localizaci√≥n Vehicular m√°s Innovador</p></div>',o=v(),a=f("nav");for(let m=0;m<p.length;m+=1)p[m].c();u=v(),r=f("div"),r.innerHTML='<div class="search-bar svelte-1jw0d6k"><input type="text" placeholder="Buscar..." class="svelte-1jw0d6k"/> <span class="search-icon svelte-1jw0d6k">üîç</span></div> <a href="https://www.google.com/" class="btn btn-primary">Portal para CLIENTES</a>',c(s,"class","logo svelte-1jw0d6k"),c(a,"class","nav svelte-1jw0d6k"),c(r,"class","header-actions svelte-1jw0d6k"),c(n,"class","header-content svelte-1jw0d6k"),c(l,"class","container"),c(e,"class","header svelte-1jw0d6k")},m(m,S){O(m,e,S),i(e,l),i(l,n),i(n,s),i(n,o),i(n,a);for(let _=0;_<p.length;_+=1)p[_]&&p[_].m(a,null);i(n,u),i(n,r)},p(m,[S]){if(S&1){d=ue(m[0]);let _;for(_=0;_<d.length;_+=1){const k=Zt(m,d,_);p[_]?p[_].p(k,S):(p[_]=Qt(k),p[_].c(),p[_].m(a,null))}for(;_<p.length;_+=1)p[_].d(1);p.length=d.length}},i:G,o:G,d(m){m&&w(e),Ue(p,m)}}}function tn(t){return[["Inicio","Soluciones","Plataforma MasterTrack","Nosotros","Contacto"]]}class ln extends me{constructor(e){super(),pe(this,e,tn,en,re,{})}}const gt={VENDEDOR:{name:"Vendedor",permissions:["GENERAR ORDEN DE COMPRA"],color:"#FF6B6B"},COORDINADOR:{name:"Coordinador de Servicios",permissions:["COORDINACION DE SERVICIOS"],color:"#4ECDC4"},PROGRAMADOR:{name:"Programador",permissions:["PROGRAMADORES"],color:"#45B7D1"},ALMACEN:{name:"Almac√©n",permissions:["ALMAC√âN"],color:"#96CEB4"},CALIDAD:{name:"Calidad",permissions:["CALIDAD"],color:"#FFEAA7"},TECNICO:{name:"T√©cnico Instalador",permissions:["T√âCNICO INSTALADOR"],color:"#DDA0DD"},SOPORTE:{name:"Soporte T√©cnico",permissions:["SOPORTE T√âCNICO"],color:"#F8B500"},SALIDA_MATERIAL:{name:"Salida de Material",permissions:["SALIDA DE MATERIAL (INSTALACION DE STOCK)"],color:"#A8E6CF"},FACTURACION:{name:"Facturaci√≥n",permissions:["FACTURACI√ìN"],color:"#FF8A80"},ADMIN:{name:"Administrador",permissions:["GENERAR ORDEN DE COMPRA","COORDINACION DE SERVICIOS","PROGRAMADORES","ALMAC√âN","CALIDAD","T√âCNICO INSTALADOR","SOPORTE T√âCNICO","SALIDA DE MATERIAL (INSTALACION DE STOCK)","FACTURACI√ìN"],color:"#6C5CE7"}},bl=_l("VENDEDOR");function gl(t,e){const l=gt[e];return l&&l.permissions.includes(t)}function ae(t){var e;return((e=gt[t])==null?void 0:e.color)||"#666666"}function ot(t){var e;return((e=gt[t])==null?void 0:e.name)||"Desconocido"}function Wt(t,e,l){const n=t.slice();n[11]=e[l];const s=gl(n[11].aspecto,n[1]);n[12]=s;const o=n[12]||n[1]==="ADMIN";return n[13]=o,n}function Xt(t,e,l){const n=t.slice();return n[16]=e[l],n}function nn(t){let e,l;function n(a,u){return a[11].completado?an:on}let s=n(t),o=s(t);return{c(){e=f("div"),o.c(),c(e,"class",l="status-indicator "+(t[11].completado?"completed":"")+" svelte-6yi4ki")},m(a,u){O(a,e,u),o.m(e,null)},p(a,u){s!==(s=n(a))&&(o.d(1),o=s(a),o&&(o.c(),o.m(e,null))),u&1&&l!==(l="status-indicator "+(a[11].completado?"completed":"")+" svelte-6yi4ki")&&c(e,"class",l)},d(a){a&&w(e),o.d()}}}function sn(t){let e,l,n,s,o;function a(p,m){return p[11].completado?cn:rn}let u=a(t),r=u(t);function d(){return t[4](t[11])}return{c(){e=f("button"),r.c(),c(e,"class",l="status-btn "+(t[11].completado?"completed":"")+" svelte-6yi4ki"),c(e,"title",n=t[11].completado?"Marcar como pendiente":"Marcar como completado")},m(p,m){O(p,e,m),r.m(e,null),s||(o=z(e,"click",d),s=!0)},p(p,m){t=p,u!==(u=a(t))&&(r.d(1),r=u(t),r&&(r.c(),r.m(e,null))),m&1&&l!==(l="status-btn "+(t[11].completado?"completed":"")+" svelte-6yi4ki")&&c(e,"class",l),m&1&&n!==(n=t[11].completado?"Marcar como pendiente":"Marcar como completado")&&c(e,"title",n)},d(p){p&&w(e),r.d(),s=!1,o()}}}function on(t){let e;return{c(){e=b("‚óã")},m(l,n){O(l,e,n)},d(l){l&&w(e)}}}function an(t){let e;return{c(){e=b("‚úì")},m(l,n){O(l,e,n)},d(l){l&&w(e)}}}function rn(t){let e;return{c(){e=b("‚óã")},m(l,n){O(l,e,n)},d(l){l&&w(e)}}}function cn(t){let e;return{c(){e=b("‚úì")},m(l,n){O(l,e,n)},d(l){l&&w(e)}}}function xt(t){let e;return{c(){e=f("div"),e.textContent="Completado",c(e,"class","completion-badge svelte-6yi4ki")},m(l,n){O(l,e,n)},d(l){l&&w(e)}}}function el(t){let e,l;return{c(){e=f("div"),l=b("Solo lectura"),c(e,"class","role-badge svelte-6yi4ki"),Q(e,"background-color",ae(t[1]))},m(n,s){O(n,e,s),i(e,l)},p(n,s){s&2&&Q(e,"background-color",ae(n[1]))},d(n){n&&w(e)}}}function dn(t){let e,l=(t[11].firmaResponsable||"No asignado")+"",n,s;return{c(){e=f("div"),n=b(l),c(e,"class",s="readonly-field "+(t[11].firmaResponsable?"filled":"")+" svelte-6yi4ki")},m(o,a){O(o,e,a),i(e,n)},p(o,a){a&1&&l!==(l=(o[11].firmaResponsable||"No asignado")+"")&&$(n,l),a&1&&s!==(s="readonly-field "+(o[11].firmaResponsable?"filled":"")+" svelte-6yi4ki")&&c(e,"class",s)},d(o){o&&w(e)}}}function un(t){let e,l,n,s,o;function a(...u){return t[5](t[11],...u)}return{c(){e=f("input"),c(e,"type","text"),e.value=l=t[11].firmaResponsable,c(e,"placeholder","Firma responsable"),c(e,"class",n=Se(t[11].firmaResponsable?"filled":"")+" svelte-6yi4ki")},m(u,r){O(u,e,r),s||(o=z(e,"input",a),s=!0)},p(u,r){t=u,r&1&&l!==(l=t[11].firmaResponsable)&&e.value!==l&&(e.value=l),r&1&&n!==(n=Se(t[11].firmaResponsable?"filled":"")+" svelte-6yi4ki")&&c(e,"class",n)},d(u){u&&w(e),s=!1,o()}}}function fn(t){let e,l=(t[11].fecha?new Date(t[11].fecha).toLocaleDateString("es-ES"):"No asignada")+"",n,s;return{c(){e=f("div"),n=b(l),c(e,"class",s="readonly-field "+(t[11].fecha?"filled":"")+" svelte-6yi4ki")},m(o,a){O(o,e,a),i(e,n)},p(o,a){a&1&&l!==(l=(o[11].fecha?new Date(o[11].fecha).toLocaleDateString("es-ES"):"No asignada")+"")&&$(n,l),a&1&&s!==(s="readonly-field "+(o[11].fecha?"filled":"")+" svelte-6yi4ki")&&c(e,"class",s)},d(o){o&&w(e)}}}function pn(t){let e,l,n,s,o;function a(...u){return t[6](t[11],...u)}return{c(){e=f("input"),c(e,"type","date"),e.value=l=t[11].fecha,c(e,"class",n=Se(t[11].fecha?"filled":"")+" svelte-6yi4ki")},m(u,r){O(u,e,r),s||(o=z(e,"input",a),s=!0)},p(u,r){t=u,r&1&&l!==(l=t[11].fecha)&&(e.value=l),r&1&&n!==(n=Se(t[11].fecha?"filled":"")+" svelte-6yi4ki")&&c(e,"class",n)},d(u){u&&w(e),s=!1,o()}}}function mn(t){let e,l;function n(a,u){return a[16].type==="checkbox"?vn:_n}let s=n(t),o=s(t);return{c(){e=f("div"),o.c(),c(e,"class",l="readonly-field "+(t[11].calidad[t[16].key]?"filled":"")+" svelte-6yi4ki")},m(a,u){O(a,e,u),o.m(e,null)},p(a,u){s===(s=n(a))&&o?o.p(a,u):(o.d(1),o=s(a),o&&(o.c(),o.m(e,null))),u&1&&l!==(l="readonly-field "+(a[11].calidad[a[16].key]?"filled":"")+" svelte-6yi4ki")&&c(e,"class",l)},d(a){a&&w(e),o.d()}}}function hn(t){let e;function l(o,a){if(o[16].type==="checkbox")return kn;if(o[16].type==="text")return gn;if(o[16].type==="textarea")return bn}let n=l(t),s=n&&n(t);return{c(){s&&s.c(),e=rt()},m(o,a){s&&s.m(o,a),O(o,e,a)},p(o,a){n===(n=l(o))&&s?s.p(o,a):(s&&s.d(1),s=n&&n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&w(e),s&&s.d(o)}}}function _n(t){let e=(t[11].calidad[t[16].key]||"No especificado")+"",l;return{c(){l=b(e)},m(n,s){O(n,l,s)},p(n,s){s&1&&e!==(e=(n[11].calidad[n[16].key]||"No especificado")+"")&&$(l,e)},d(n){n&&w(l)}}}function vn(t){let e=t[11].calidad[t[16].key]?"‚úì":"‚óã",l;return{c(){l=b(e)},m(n,s){O(n,l,s)},p(n,s){s&1&&e!==(e=n[11].calidad[n[16].key]?"‚úì":"‚óã")&&$(l,e)},d(n){n&&w(l)}}}function bn(t){let e,l,n,s,o,a;function u(...r){return t[9](t[11],t[16],...r)}return{c(){e=f("textarea"),e.value=l=t[11].calidad[t[16].key]||"",c(e,"placeholder",n=t[16].label),c(e,"rows","2"),c(e,"class",s=Se(t[11].calidad[t[16].key]?"filled":"")+" svelte-6yi4ki")},m(r,d){O(r,e,d),o||(a=z(e,"input",u),o=!0)},p(r,d){t=r,d&1&&l!==(l=t[11].calidad[t[16].key]||"")&&(e.value=l),d&1&&n!==(n=t[16].label)&&c(e,"placeholder",n),d&1&&s!==(s=Se(t[11].calidad[t[16].key]?"filled":"")+" svelte-6yi4ki")&&c(e,"class",s)},d(r){r&&w(e),o=!1,a()}}}function gn(t){let e,l,n,s,o,a;function u(...r){return t[8](t[11],t[16],...r)}return{c(){e=f("input"),c(e,"type","text"),e.value=l=t[11].calidad[t[16].key]||"",c(e,"placeholder",n=t[16].label),c(e,"class",s=Se(t[11].calidad[t[16].key]?"filled":"")+" svelte-6yi4ki")},m(r,d){O(r,e,d),o||(a=z(e,"input",u),o=!0)},p(r,d){t=r,d&1&&l!==(l=t[11].calidad[t[16].key]||"")&&e.value!==l&&(e.value=l),d&1&&n!==(n=t[16].label)&&c(e,"placeholder",n),d&1&&s!==(s=Se(t[11].calidad[t[16].key]?"filled":"")+" svelte-6yi4ki")&&c(e,"class",s)},d(r){r&&w(e),o=!1,a()}}}function kn(t){let e,l,n,s;function o(...a){return t[7](t[11],t[16],...a)}return{c(){e=f("input"),c(e,"type","checkbox"),e.checked=l=t[11].calidad[t[16].key],c(e,"class","calidad-checkbox svelte-6yi4ki")},m(a,u){O(a,e,u),n||(s=z(e,"change",o),n=!0)},p(a,u){t=a,u&1&&l!==(l=t[11].calidad[t[16].key])&&(e.checked=l)},d(a){a&&w(e),n=!1,s()}}}function tl(t){let e,l,n=t[16].label+"",s,o,a;function u(p,m){return p[13]?hn:mn}let r=u(t),d=r(t);return{c(){e=f("div"),l=f("label"),s=b(n),o=v(),d.c(),a=v(),c(l,"class","svelte-6yi4ki"),c(e,"class","calidad-field svelte-6yi4ki")},m(p,m){O(p,e,m),i(e,l),i(l,s),i(e,o),d.m(e,null),i(e,a)},p(p,m){m&1&&n!==(n=p[16].label+"")&&$(s,n),r===(r=u(p))&&d?d.p(p,m):(d.d(1),d=r(p),d&&(d.c(),d.m(e,a)))},d(p){p&&w(e),d.d()}}}function ll(t){let e,l,n,s,o,a=t[11].aspecto+"",u,r,d,p,m,S,_,k,g,h,I,N;function C(y,T){return y[13]?sn:nn}let P=C(t),D=P(t),E=t[11].completado&&xt(),A=!t[13]&&el(t);function B(y,T){return y[13]?un:dn}let U=B(t),V=U(t);function K(y,T){return y[13]?pn:fn}let H=K(t),M=H(t),j=ue(nl(t[11].aspecto)),R=[];for(let y=0;y<j.length;y+=1)R[y]=tl(Xt(t,j,y));return{c(){e=f("tr"),l=f("td"),D.c(),n=v(),s=f("td"),o=f("strong"),u=b(a),r=v(),E&&E.c(),d=v(),A&&A.c(),p=v(),m=f("td"),V.c(),S=v(),_=f("td"),M.c(),k=v(),g=f("td"),h=f("div");for(let y=0;y<R.length;y+=1)R[y].c();I=v(),c(l,"class","status-cell svelte-6yi4ki"),c(s,"class","aspecto-cell svelte-6yi4ki"),c(m,"class","signature-cell svelte-6yi4ki"),c(_,"class","date-cell svelte-6yi4ki"),c(h,"class","calidad-fields svelte-6yi4ki"),c(g,"class","calidad-cell svelte-6yi4ki"),c(e,"class",N="table-row "+(t[11].completado?"completed":"")+" "+(t[13]?"":"readonly")+" svelte-6yi4ki")},m(y,T){O(y,e,T),i(e,l),D.m(l,null),i(e,n),i(e,s),i(s,o),i(o,u),i(s,r),E&&E.m(s,null),i(s,d),A&&A.m(s,null),i(e,p),i(e,m),V.m(m,null),i(e,S),i(e,_),M.m(_,null),i(e,k),i(e,g),i(g,h);for(let L=0;L<R.length;L+=1)R[L]&&R[L].m(h,null);i(e,I)},p(y,T){if(P===(P=C(y))&&D?D.p(y,T):(D.d(1),D=P(y),D&&(D.c(),D.m(l,null))),T&1&&a!==(a=y[11].aspecto+"")&&$(u,a),y[11].completado?E||(E=xt(),E.c(),E.m(s,d)):E&&(E.d(1),E=null),y[13]?A&&(A.d(1),A=null):A?A.p(y,T):(A=el(y),A.c(),A.m(s,null)),U===(U=B(y))&&V?V.p(y,T):(V.d(1),V=U(y),V&&(V.c(),V.m(m,null))),H===(H=K(y))&&M?M.p(y,T):(M.d(1),M=H(y),M&&(M.c(),M.m(_,null))),T&7){j=ue(nl(y[11].aspecto));let L;for(L=0;L<j.length;L+=1){const X=Xt(y,j,L);R[L]?R[L].p(X,T):(R[L]=tl(X),R[L].c(),R[L].m(h,null))}for(;L<R.length;L+=1)R[L].d(1);R.length=j.length}T&3&&N!==(N="table-row "+(y[11].completado?"completed":"")+" "+(y[13]?"":"readonly")+" svelte-6yi4ki")&&c(e,"class",N)},d(y){y&&w(e),D.d(),E&&E.d(),A&&A.d(),V.d(),M.d(),Ue(R,y)}}}function yn(t){let e,l,n,s,o,a=ue(t[0]),u=[];for(let r=0;r<a.length;r+=1)u[r]=ll(Wt(t,a,r));return{c(){e=f("div"),l=f("table"),n=f("thead"),n.innerHTML='<tr><th class="svelte-6yi4ki">ESTADO</th> <th class="svelte-6yi4ki">ASPECTO</th> <th class="svelte-6yi4ki">FIRMA RESPONSABLE</th> <th class="svelte-6yi4ki">FECHA</th> <th class="svelte-6yi4ki">CALIDAD</th></tr>',s=v(),o=f("tbody");for(let r=0;r<u.length;r+=1)u[r].c();c(l,"class","checklist-table svelte-6yi4ki"),c(e,"class","checklist-table-container svelte-6yi4ki")},m(r,d){O(r,e,d),i(e,l),i(l,n),i(l,s),i(l,o);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(o,null)},p(r,[d]){if(d&15){a=ue(r[0]);let p;for(p=0;p<a.length;p+=1){const m=Wt(r,a,p);u[p]?u[p].p(m,d):(u[p]=ll(m),u[p].c(),u[p].m(o,null))}for(;p<u.length;p+=1)u[p].d(1);u.length=a.length}},i:G,o:G,d(r){r&&w(e),Ue(u,r)}}}function nl(t){switch(t){case"GENERAR ORDEN DE COMPRA":return[{key:"datosCte",label:"DATOS CTE",type:"checkbox"},{key:"checklist",label:"CHECKLIST",type:"checkbox"},{key:"comodato",label:"COMODATO",type:"checkbox"},{key:"garantia",label:"GARANTIA",type:"checkbox"},{key:"cortesia",label:"CORTESIA",type:"checkbox"},{key:"demo",label:"DEMO",type:"checkbox"},{key:"precioRenta",label:"PRECIO RENTA",type:"checkbox"},{key:"folio",label:"FOLIO",type:"text"},{key:"numProgServ",label:"# DE PROG. SERV",type:"text"}];case"COORDINACION DE SERVICIOS":return[{key:"validado",label:"VALIDADO",type:"checkbox"},{key:"valido",label:"V√ÅLIDO",type:"checkbox"}];case"PROGRAMADORES":return[{key:"ids",label:"ID'S",type:"checkbox"},{key:"valido",label:"V√ÅLIDO",type:"checkbox"}];case"ALMAC√âN":return[{key:"matCompleto",label:"MAT. COMPLETO",type:"checkbox"},{key:"numVale",label:"# DE VALE",type:"text"},{key:"hojaSalida",label:"# HOJA SALIDA",type:"checkbox"}];case"CALIDAD":return[{key:"observaciones",label:"OBSERVACIONES:",type:"textarea"}];case"T√âCNICO INSTALADOR":return[];case"SOPORTE T√âCNICO":return[{key:"procesada",label:"PROCESADA",type:"checkbox"},{key:"pruebas",label:"PRUEBAS",type:"checkbox"},{key:"notificacionCliente",label:"NOTIFICACION AL CLIENTE",type:"checkbox"}];case"SALIDA DE MATERIAL (INSTALACION DE STOCK)":return[{key:"hojaSalida",label:"# HOJA SALIDA",type:"text"}];case"FACTURACI√ìN":return[];default:return[]}}function Cn(t,e,l){let n;at(t,bl,k=>l(1,n=k));let{checklistData:s}=e;const o=fl();function a(k,g,h){o("update",{id:k,field:g,value:h})}function u(k){o("toggle",{id:k})}const r=k=>u(k.id),d=(k,g)=>a(k.id,"firmaResponsable",g.target.value),p=(k,g)=>a(k.id,"fecha",g.target.value),m=(k,g,h)=>a(k.id,`calidad.${g.key}`,h.target.checked),S=(k,g,h)=>a(k.id,`calidad.${g.key}`,h.target.value),_=(k,g,h)=>a(k.id,`calidad.${g.key}`,h.target.value);return t.$$set=k=>{"checklistData"in k&&l(0,s=k.checklistData)},[s,n,a,u,r,d,p,m,S,_]}class An extends me{constructor(e){super(),pe(this,e,Cn,yn,re,{checklistData:0})}}function sl(t,e,l){const n=t.slice();return n[13]=e[l],n}function il(t){let e;return{c(){e=f("div"),e.textContent="Cargando...",c(e,"class","suggestions suggestions--loading svelte-14hmbl8")},m(l,n){O(l,e,n)},d(l){l&&w(e)}}}function ol(t){let e,l=ue(t[1]),n=[];for(let s=0;s<l.length;s+=1)n[s]=al(sl(t,l,s));return{c(){e=f("ul");for(let s=0;s<n.length;s+=1)n[s].c();c(e,"class","suggestions svelte-14hmbl8")},m(s,o){O(s,e,o);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(s,o){if(o&130){l=ue(s[1]);let a;for(a=0;a<l.length;a+=1){const u=sl(s,l,a);n[a]?n[a].p(u,o):(n[a]=al(u),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=l.length}},d(s){s&&w(e),Ue(n,s)}}}function al(t){let e,l=t[13].razonSocial+"",n,s,o=t[13].id+"",a,u,r,d;function p(){return t[10](t[13])}return{c(){e=f("li"),n=b(l),s=b(" ("),a=b(o),u=b(`)\r
              `),c(e,"class","svelte-14hmbl8")},m(m,S){O(m,e,S),i(e,n),i(e,s),i(e,a),i(e,u),r||(d=z(e,"mousedown",ct(p)),r=!0)},p(m,S){t=m,S&2&&l!==(l=t[13].razonSocial+"")&&$(n,l),S&2&&o!==(o=t[13].id+"")&&$(a,o)},d(m){m&&w(e),r=!1,d()}}}function Sn(t){let e,l,n,s,o,a,u,r,d,p,m,S,_,k,g,h,I,N,C,P,D=t[2]&&il(),E=t[1].length>0&&ol(t);return{c(){e=f("div"),l=f("div"),l.innerHTML='<div class="logo-section svelte-14hmbl8"><div class="logo-icon svelte-14hmbl8"><span class="logo-m svelte-14hmbl8">M</span> <div class="antenna svelte-14hmbl8"></div></div> <div class="logo-text svelte-14hmbl8"><h1 class="svelte-14hmbl8">MASTERTRACK</h1></div></div> <div class="title-section svelte-14hmbl8"><h2 class="svelte-14hmbl8">CHECKLIST DE CONTROL</h2></div> <div class="document-info svelte-14hmbl8"><p class="svelte-14hmbl8">REG-OPN-001 REV 00</p> <p class="svelte-14hmbl8">P√ÅGINA 1 DE 1</p></div>',n=v(),s=f("div"),o=f("div"),a=f("label"),a.textContent="CLIENTE:",u=v(),r=f("div"),d=f("input"),p=v(),D&&D.c(),m=v(),E&&E.c(),S=v(),_=f("button"),_.textContent="Buscar",k=v(),g=f("div"),h=f("label"),h.textContent="FECHA:",I=v(),N=f("input"),c(l,"class","header-top svelte-14hmbl8"),c(a,"class","svelte-14hmbl8"),c(d,"class","inputClient svelte-14hmbl8"),c(d,"type","text"),c(d,"placeholder","Nombre del cliente"),c(d,"autocomplete","off"),c(r,"class","input-wrap svelte-14hmbl8"),c(_,"class","searchButton svelte-14hmbl8"),c(_,"type","button"),c(o,"class","info-field svelte-14hmbl8"),c(h,"class","svelte-14hmbl8"),c(N,"type","date"),c(N,"class","svelte-14hmbl8"),c(g,"class","info-field svelte-14hmbl8"),c(s,"class","client-info svelte-14hmbl8"),c(e,"class","checklist-header svelte-14hmbl8")},m(A,B){O(A,e,B),i(e,l),i(e,n),i(e,s),i(s,o),i(o,a),i(o,u),i(o,r),i(r,d),Y(d,t[0]),i(r,p),D&&D.m(r,null),i(r,m),E&&E.m(r,null),i(o,S),i(o,_),i(s,k),i(s,g),i(g,h),i(g,I),i(g,N),Y(N,t[3]),C||(P=[z(d,"input",t[8]),z(d,"keydown",t[9]),Sl(t[5].call(null,r)),z(_,"click",ct(t[6])),z(N,"input",t[11]),z(N,"input",t[12])],C=!0)},p(A,[B]){B&1&&d.value!==A[0]&&Y(d,A[0]),A[2]?D||(D=il(),D.c(),D.m(r,m)):D&&(D.d(1),D=null),A[1].length>0?E?E.p(A,B):(E=ol(A),E.c(),E.m(r,null)):E&&(E.d(1),E=null),B&8&&Y(N,A[3])},i:G,o:G,d(A){A&&w(e),D&&D.d(),E&&E.d(),C=!1,fe(P)}}}function En(t,e,l){const n=fl();let s="",o=[],a=!1;function u(h){const I=N=>{h.contains(N.target)||l(1,o=[])};return document.addEventListener("mousedown",I),{destroy(){document.removeEventListener("mousedown",I)}}}async function r(){if(!s||s.length<1){l(1,o=[]);return}l(2,a=!0);try{l(1,o=await Gl(s,10))}catch(h){console.error("Error al buscar clientes:",h),l(1,o=[])}finally{l(2,a=!1)}}function d(h){l(0,s=h.razonSocial),l(1,o=[]),n("update",{field:"cliente",value:h.razonSocial,id:h.id})}let p=new Date().toISOString().split("T")[0];function m(){s=this.value,l(0,s)}const S=h=>{h.key==="Escape"&&l(1,o=[])},_=h=>d(h);function k(){p=this.value,l(3,p)}return[s,o,a,p,n,u,r,d,m,S,_,k,h=>n("update",{field:"fecha",value:h.target.value})]}class wn extends me{constructor(e){super(),pe(this,e,En,Sn,re,{})}}function On(t){let e,l;return{c(){e=b(t[9]),l=b("m")},m(n,s){O(n,e,s),O(n,l,s)},p(n,s){s&512&&$(e,n[9])},d(n){n&&(w(e),w(l))}}}function Dn(t){let e,l,n,s;return{c(){e=b(t[10]),l=b("h "),n=b(t[9]),s=b("m")},m(o,a){O(o,e,a),O(o,l,a),O(o,n,a),O(o,s,a)},p(o,a){a&1024&&$(e,o[10]),a&512&&$(n,o[9])},d(o){o&&(w(e),w(l),w(n),w(s))}}}function Rn(t){let e;return{c(){e=b("¬°Completado!")},m(l,n){O(l,e,n)},p:G,d(l){l&&w(e)}}}function In(t){var n;let e=(((n=t[2].find(cl))==null?void 0:n.aspecto.split(" ").slice(0,2).join(" "))||"N/A")+"",l;return{c(){l=b(e)},m(s,o){O(s,l,o)},p(s,o){var a;o&4&&e!==(e=(((a=s[2].find(cl))==null?void 0:a.aspecto.split(" ").slice(0,2).join(" "))||"N/A")+"")&&$(l,e)},d(s){s&&w(l)}}}function Nn(t){let e;return{c(){e=b("Todos completados")},m(l,n){O(l,e,n)},d(l){l&&w(e)}}}function Tn(t){let e;return{c(){e=b("Pendiente")},m(l,n){O(l,e,n)},d(l){l&&w(e)}}}function rl(t){let e,l,n,s,o,a,u,r=t[0].cliente+"",d,p,m,S,_,k=new Date(t[0].fecha).toLocaleDateString("es-ES")+"",g,h,I,N,C,P,D=t[12]===100?"Completado":t[12]>50?"En Progreso":"Pendiente",E,A,B,U,V,K,H,M=ot(t[6])+"",j;return{c(){e=f("div"),l=f("h3"),l.textContent="üìã Informaci√≥n del Cliente",n=v(),s=f("div"),o=f("div"),a=f("strong"),a.textContent="Cliente:",u=v(),d=b(r),p=v(),m=f("div"),S=f("strong"),S.textContent="Fecha:",_=v(),g=b(k),h=v(),I=f("div"),N=f("strong"),N.textContent="Estado:",C=v(),P=f("span"),E=b(D),B=v(),U=f("div"),V=f("strong"),V.textContent="Mi Rol:",K=v(),H=f("span"),j=b(M),c(l,"class","svelte-12y8d0w"),c(o,"class","client-field svelte-12y8d0w"),c(m,"class","client-field svelte-12y8d0w"),c(P,"class",A="status-badge "+(t[12]===100?"completed":t[12]>50?"in-progress":"pending")+" svelte-12y8d0w"),c(I,"class","client-field svelte-12y8d0w"),c(H,"class","role-badge svelte-12y8d0w"),Q(H,"background-color",ae(t[6])),c(U,"class","client-field svelte-12y8d0w"),c(s,"class","client-details svelte-12y8d0w"),c(e,"class","client-info-card svelte-12y8d0w")},m(R,y){O(R,e,y),i(e,l),i(e,n),i(e,s),i(s,o),i(o,a),i(o,u),i(o,d),i(s,p),i(s,m),i(m,S),i(m,_),i(m,g),i(s,h),i(s,I),i(I,N),i(I,C),i(I,P),i(P,E),i(s,B),i(s,U),i(U,V),i(U,K),i(U,H),i(H,j)},p(R,y){y&1&&r!==(r=R[0].cliente+"")&&$(d,r),y&1&&k!==(k=new Date(R[0].fecha).toLocaleDateString("es-ES")+"")&&$(g,k),y&4096&&D!==(D=R[12]===100?"Completado":R[12]>50?"En Progreso":"Pendiente")&&$(E,D),y&4096&&A!==(A="status-badge "+(R[12]===100?"completed":R[12]>50?"in-progress":"pending")+" svelte-12y8d0w")&&c(P,"class",A),y&64&&M!==(M=ot(R[6])+"")&&$(j,M),y&64&&Q(H,"background-color",ae(R[6]))},d(R){R&&w(e)}}}function Ln(t){let e,l,n,s,o,a,u,r,d,p,m,S,_,k,g,h,I,N,C,P,D,E,A,B,U,V=ot(t[6])+"",K,H,M,j,R,y,T,L,X,ee,se=t[2].length+"",Oe,he,$e,le,Ee,_e,Z,ve,je,q,W,Fe,be,qe,De,Je,kt,ge,Ke,yt,Re,ut,Ct,Ye=t[3].length+"",ft,At,Ze,St,Ie,Qe,Et,ke,We,wt,Ve,Ot,Xe,Dt,Ne,xe,Rt,ye,et,It,ze,Nt,Ge,Tt;function Lt(F,J){return F[10]>0?Dn:On}let tt=Lt(t),ie=tt(t);function Pt(F,J){return F[7]>0?In:Rn}let lt=Pt(t),oe=lt(t);function Mt(F,J){return F[7]>0?Tn:Nn}let nt=Mt(t),Ce=nt(t),x=t[0].cliente&&rl(t);return{c(){e=f("div"),l=f("div"),n=f("div"),s=f("div"),s.textContent="üìä",o=v(),a=f("div"),u=f("h3"),u.textContent="Progreso General",r=v(),d=f("div"),p=b(t[12]),m=b("%"),S=v(),_=f("div"),k=b(t[5]),g=b(" de "),h=b(t[4]),I=b(" pasos"),N=v(),C=f("div"),P=f("div"),D=b("üë§"),E=v(),A=f("div"),B=f("h3"),U=b("Mi Progreso ("),K=b(V),H=b(")"),M=v(),j=f("div"),R=b(t[8]),y=b("%"),T=v(),L=f("div"),X=b(t[1]),ee=b(" de "),Oe=b(se),he=b(" pasos"),$e=v(),le=f("div"),Ee=f("div"),Ee.textContent="‚è≥",_e=v(),Z=f("div"),ve=f("h3"),ve.textContent="Mis Pendientes",je=v(),q=f("div"),W=b(t[7]),Fe=v(),be=f("div"),be.textContent="por completar",qe=v(),De=f("div"),Je=f("div"),Je.textContent="‚ö†Ô∏è",kt=v(),ge=f("div"),Ke=f("h3"),Ke.textContent="Pasos Cr√≠ticos",yt=v(),Re=f("div"),ut=b(t[11]),Ct=b("/"),ft=b(Ye),At=v(),Ze=f("div"),Ze.textContent="completados",St=v(),Ie=f("div"),Qe=f("div"),Qe.textContent="‚è∞",Et=v(),ke=f("div"),We=f("h3"),We.textContent="Tiempo Estimado",wt=v(),Ve=f("div"),ie.c(),Ot=v(),Xe=f("div"),Xe.textContent="restante",Dt=v(),Ne=f("div"),xe=f("div"),xe.textContent="üéØ",Rt=v(),ye=f("div"),et=f("h3"),et.textContent="Pr√≥ximo Paso",It=v(),ze=f("div"),oe.c(),Nt=v(),Ge=f("div"),Ce.c(),Tt=v(),x&&x.c(),c(s,"class","stat-icon svelte-12y8d0w"),c(u,"class","svelte-12y8d0w"),c(d,"class","stat-value svelte-12y8d0w"),c(_,"class","stat-detail svelte-12y8d0w"),c(a,"class","stat-content svelte-12y8d0w"),c(n,"class","stat-card svelte-12y8d0w"),c(P,"class","stat-icon svelte-12y8d0w"),Q(P,"background-color",ae(t[6])),c(B,"class","svelte-12y8d0w"),c(j,"class","stat-value svelte-12y8d0w"),c(L,"class","stat-detail svelte-12y8d0w"),c(A,"class","stat-content svelte-12y8d0w"),c(C,"class","stat-card user-progress svelte-12y8d0w"),Q(C,"border-color",ae(t[6])),c(Ee,"class","stat-icon svelte-12y8d0w"),c(ve,"class","svelte-12y8d0w"),c(q,"class","stat-value svelte-12y8d0w"),c(be,"class","stat-detail svelte-12y8d0w"),c(Z,"class","stat-content svelte-12y8d0w"),c(le,"class","stat-card svelte-12y8d0w"),c(Je,"class","stat-icon svelte-12y8d0w"),c(Ke,"class","svelte-12y8d0w"),c(Re,"class","stat-value svelte-12y8d0w"),c(Ze,"class","stat-detail svelte-12y8d0w"),c(ge,"class","stat-content svelte-12y8d0w"),c(De,"class","stat-card svelte-12y8d0w"),c(Qe,"class","stat-icon svelte-12y8d0w"),c(We,"class","svelte-12y8d0w"),c(Ve,"class","stat-value svelte-12y8d0w"),c(Xe,"class","stat-detail svelte-12y8d0w"),c(ke,"class","stat-content svelte-12y8d0w"),c(Ie,"class","stat-card svelte-12y8d0w"),c(xe,"class","stat-icon svelte-12y8d0w"),c(et,"class","svelte-12y8d0w"),c(ze,"class","stat-value svelte-12y8d0w"),c(Ge,"class","stat-detail svelte-12y8d0w"),c(ye,"class","stat-content svelte-12y8d0w"),c(Ne,"class","stat-card svelte-12y8d0w"),c(l,"class","stats-grid svelte-12y8d0w"),c(e,"class","stats-container svelte-12y8d0w")},m(F,J){O(F,e,J),i(e,l),i(l,n),i(n,s),i(n,o),i(n,a),i(a,u),i(a,r),i(a,d),i(d,p),i(d,m),i(a,S),i(a,_),i(_,k),i(_,g),i(_,h),i(_,I),i(l,N),i(l,C),i(C,P),i(P,D),i(C,E),i(C,A),i(A,B),i(B,U),i(B,K),i(B,H),i(A,M),i(A,j),i(j,R),i(j,y),i(A,T),i(A,L),i(L,X),i(L,ee),i(L,Oe),i(L,he),i(l,$e),i(l,le),i(le,Ee),i(le,_e),i(le,Z),i(Z,ve),i(Z,je),i(Z,q),i(q,W),i(Z,Fe),i(Z,be),i(l,qe),i(l,De),i(De,Je),i(De,kt),i(De,ge),i(ge,Ke),i(ge,yt),i(ge,Re),i(Re,ut),i(Re,Ct),i(Re,ft),i(ge,At),i(ge,Ze),i(l,St),i(l,Ie),i(Ie,Qe),i(Ie,Et),i(Ie,ke),i(ke,We),i(ke,wt),i(ke,Ve),ie.m(Ve,null),i(ke,Ot),i(ke,Xe),i(l,Dt),i(l,Ne),i(Ne,xe),i(Ne,Rt),i(Ne,ye),i(ye,et),i(ye,It),i(ye,ze),oe.m(ze,null),i(ye,Nt),i(ye,Ge),Ce.m(Ge,null),i(e,Tt),x&&x.m(e,null)},p(F,[J]){J&4096&&$(p,F[12]),J&32&&$(k,F[5]),J&16&&$(h,F[4]),J&64&&Q(P,"background-color",ae(F[6])),J&64&&V!==(V=ot(F[6])+"")&&$(K,V),J&256&&$(R,F[8]),J&2&&$(X,F[1]),J&4&&se!==(se=F[2].length+"")&&$(Oe,se),J&64&&Q(C,"border-color",ae(F[6])),J&128&&$(W,F[7]),J&2048&&$(ut,F[11]),J&8&&Ye!==(Ye=F[3].length+"")&&$(ft,Ye),tt===(tt=Lt(F))&&ie?ie.p(F,J):(ie.d(1),ie=tt(F),ie&&(ie.c(),ie.m(Ve,null))),lt===(lt=Pt(F))&&oe?oe.p(F,J):(oe.d(1),oe=lt(F),oe&&(oe.c(),oe.m(ze,null))),nt!==(nt=Mt(F))&&(Ce.d(1),Ce=nt(F),Ce&&(Ce.c(),Ce.m(Ge,null))),F[0].cliente?x?x.p(F,J):(x=rl(F),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},i:G,o:G,d(F){F&&w(e),ie.d(),oe.d(),Ce.d(),x&&x.d()}}}const cl=t=>!t.completado;function Pn(t,e,l){let n,s,o,a,u,r,d,p,m,S,_,k,g,h;at(t,bl,C=>l(6,h=C));let{checklistData:I}=e,{clientData:N}=e;return t.$$set=C=>{"checklistData"in C&&l(13,I=C.checklistData),"clientData"in C&&l(0,N=C.clientData)},t.$$.update=()=>{t.$$.dirty&8192&&l(4,n=I.length),t.$$.dirty&8192&&l(5,s=I.filter(C=>C.completado).length),t.$$.dirty&48&&l(15,o=n-s),t.$$.dirty&48&&l(12,a=Math.round(s/n*100)),t.$$.dirty&8192&&l(3,u=I.filter(C=>Object.keys(C.calidad).length>2)),t.$$.dirty&8&&l(11,r=u.filter(C=>C.completado).length),t.$$.dirty&32768&&l(14,d=o*30),t.$$.dirty&16384&&l(10,p=Math.floor(d/60)),t.$$.dirty&16384&&l(9,m=d%60),t.$$.dirty&8256&&l(2,S=I.filter(C=>gl(C.aspecto,h))),t.$$.dirty&4&&l(1,_=S.filter(C=>C.completado).length),t.$$.dirty&6&&l(8,k=S.length>0?Math.round(_/S.length*100):0),t.$$.dirty&6&&l(7,g=S.length-_)},[N,_,S,u,n,s,h,g,k,m,p,r,a,I,d,o]}class Mn extends me{constructor(e){super(),pe(this,e,Pn,Ln,re,{checklistData:13,clientData:0})}}function $n(t){let e,l,n,s,o=(t[2]||"?").charAt(0).toUpperCase()+"",a,u,r,d,p=`Nombre: ${t[2]}`||"Nombre no disponible",m,S,_,k=`Cargo: ${t[1]}`||"Cargo no disponible",g;return{c(){e=f("div"),l=f("div"),n=f("div"),s=f("div"),a=b(o),u=v(),r=f("div"),d=f("div"),m=b(p),S=v(),_=f("div"),g=b(k),c(s,"class","user-avatar svelte-1ke50z4"),Q(s,"background-color",t[0]),c(d,"class","user-name svelte-1ke50z4"),c(_,"class","user-role svelte-1ke50z4"),Q(_,"color",t[0]),c(r,"class","user-details svelte-1ke50z4"),c(n,"class","user-info svelte-1ke50z4"),c(l,"class","current-user svelte-1ke50z4"),c(e,"class","role-selector svelte-1ke50z4")},m(h,I){O(h,e,I),i(e,l),i(l,n),i(n,s),i(s,a),i(n,u),i(n,r),i(r,d),i(d,m),i(r,S),i(r,_),i(_,g)},p(h,[I]){I&4&&o!==(o=(h[2]||"?").charAt(0).toUpperCase()+"")&&$(a,o),I&1&&Q(s,"background-color",h[0]),I&4&&p!==(p=`Nombre: ${h[2]}`||"Nombre no disponible")&&$(m,p),I&2&&k!==(k=`Cargo: ${h[1]}`||"Cargo no disponible")&&$(g,k),I&1&&Q(_,"color",h[0])},i:G,o:G,d(h){h&&w(e)}}}function jn(t,e,l){let n,s,o,a,u,r;return at(t,dt,d=>l(5,r=d)),t.$$.update=()=>{t.$$.dirty&32&&l(4,n=(r==null?void 0:r.me)||null),t.$$.dirty&16&&l(2,s=(n==null?void 0:n.username)||(n==null?void 0:n.email)||""),t.$$.dirty&16&&l(3,o=(n==null?void 0:n.role)||""),t.$$.dirty&8&&l(1,a=o?vl[o]||o:""),t.$$.dirty&8&&l(0,u=ae?ae(o):"#654")},[u,a,s,o,n,r]}class Fn extends me{constructor(e){super(),pe(this,e,jn,$n,re,{})}}const qn={cliente:"Transportes Ejemplo S.A.",fecha:new Date().toISOString().split("T")[0]},Vn=[{id:1,aspecto:"GENERAR ORDEN DE COMPRA",firmaResponsable:"Juan P√©rez",fecha:"2024-01-15",completado:!0,calidad:{datosCte:!0,checklist:!0,comodato:!0,garantia:!0,cortesia:!1,demo:!0,precioRenta:!0,folio:"FOL-001",numProgServ:"SERV-001"}},{id:2,aspecto:"COORDINACION DE SERVICIOS",firmaResponsable:"Mar√≠a Garc√≠a",fecha:"2024-01-16",completado:!0,calidad:{validado:!0,valido:!0}},{id:3,aspecto:"PROGRAMADORES",firmaResponsable:"Carlos L√≥pez",fecha:"2024-01-17",completado:!0,calidad:{ids:!0,valido:!0}},{id:4,aspecto:"ALMAC√âN",firmaResponsable:"Ana Rodr√≠guez",fecha:"2024-01-18",completado:!0,calidad:{matCompleto:!0,numVale:"VALE-001",hojaSalida:!0}},{id:5,aspecto:"CALIDAD",firmaResponsable:"Luis Mart√≠nez",fecha:"2024-01-19",completado:!0,calidad:{observaciones:"Material verificado y aprobado"}},{id:6,aspecto:"T√âCNICO INSTALADOR",firmaResponsable:"Roberto Silva",fecha:"2024-01-20",completado:!1,calidad:{}},{id:7,aspecto:"SOPORTE T√âCNICO",firmaResponsable:"",fecha:"",completado:!1,calidad:{procesada:!1,pruebas:!1,notificacionCliente:!1}},{id:8,aspecto:"CALIDAD",firmaResponsable:"",fecha:"",completado:!1,calidad:{observaciones:""}},{id:9,aspecto:"SALIDA DE MATERIAL (INSTALACION DE STOCK)",firmaResponsable:"",fecha:"",completado:!1,calidad:{hojaSalida:""}},{id:10,aspecto:"FACTURACI√ìN",firmaResponsable:"",fecha:"",completado:!1,calidad:{}}],zn="Instalaci√≥n programada para la pr√≥xima semana. Cliente solicita instalaci√≥n en horario matutino.";function Gn(t){let e,l,n,s,o,a,u,r,d,p,m,S,_,k,g,h,I,N,C=t[0].filter(dl).length+"",P,D,E=t[0].length+"",A,B,U,V,K,H,M,j,R,y,T,L,X,ee,se,Oe,he,$e,le,Ee,_e,Z,ve,je;return o=new Fn({}),u=new wn({props:{clientData:t[1]}}),u.$on("update",t[4]),d=new Mn({props:{checklistData:t[0],clientData:t[1]}}),M=new An({props:{checklistData:t[0]}}),M.$on("update",t[5]),M.$on("toggle",t[6]),{c(){e=f("div"),l=f("div"),n=f("div"),n.innerHTML='<h2 class="svelte-midaq5">PLATAFORMA AVANZADA DE SEGURIDAD Y GESTI√ìN DE FLOTAS</h2> <h1 class="svelte-midaq5">¬°Tenemos una <span class="highlight svelte-midaq5">soluci√≥n</span> para cada <span class="highlight svelte-midaq5">problem√°tica del Transporte!</span></h1>',s=v(),Ae(o.$$.fragment),a=v(),Ae(u.$$.fragment),r=v(),Ae(d.$$.fragment),p=v(),m=f("div"),S=f("div"),_=f("span"),k=b("Progreso del Proceso: "),g=b(t[3]),h=b("%"),I=v(),N=f("span"),P=b(C),D=b(" de "),A=b(E),B=b(" pasos completados"),U=v(),V=f("div"),K=f("div"),H=v(),Ae(M.$$.fragment),j=v(),R=f("div"),y=f("h3"),y.textContent="COMENTARIOS:",T=v(),L=f("textarea"),X=v(),ee=f("div"),se=f("button"),se.textContent="Cargar Ejemplo",Oe=v(),he=f("button"),he.textContent="Limpiar Formulario",$e=v(),le=f("button"),le.textContent="Imprimir Checklist",Ee=v(),_e=f("button"),_e.textContent="Guardar Checklist",c(n,"class","main-title svelte-midaq5"),c(S,"class","progress-info svelte-midaq5"),c(K,"class","progress-fill svelte-midaq5"),Q(K,"width",t[3]+"%"),c(V,"class","progress-bar svelte-midaq5"),c(m,"class","progress-section svelte-midaq5"),c(y,"class","svelte-midaq5"),c(L,"placeholder","Ingrese comentarios adicionales..."),c(L,"rows","4"),c(L,"class","svelte-midaq5"),c(R,"class","comments-section svelte-midaq5"),c(se,"class","btn btn-outline"),c(he,"class","btn btn-outline"),c(le,"class","btn btn-outline"),c(_e,"class","btn btn-primary"),c(ee,"class","actions svelte-midaq5"),c(l,"class","container"),c(e,"class","checklist-container svelte-midaq5")},m(q,W){O(q,e,W),i(e,l),i(l,n),i(l,s),ce(o,l,null),i(l,a),ce(u,l,null),i(l,r),ce(d,l,null),i(l,p),i(l,m),i(m,S),i(S,_),i(_,k),i(_,g),i(_,h),i(S,I),i(S,N),i(N,P),i(N,D),i(N,A),i(N,B),i(m,U),i(m,V),i(V,K),i(l,H),ce(M,l,null),i(l,j),i(l,R),i(R,y),i(R,T),i(R,L),Y(L,t[2]),i(l,X),i(l,ee),i(ee,se),i(ee,Oe),i(ee,he),i(ee,$e),i(ee,le),i(ee,Ee),i(ee,_e),Z=!0,ve||(je=[z(L,"input",t[10]),z(se,"click",t[7]),z(he,"click",t[9]),z(le,"click",t[11]),z(_e,"click",t[8])],ve=!0)},p(q,[W]){const Fe={};W&2&&(Fe.clientData=q[1]),u.$set(Fe);const be={};W&1&&(be.checklistData=q[0]),W&2&&(be.clientData=q[1]),d.$set(be),(!Z||W&8)&&$(g,q[3]),(!Z||W&1)&&C!==(C=q[0].filter(dl).length+"")&&$(P,C),(!Z||W&1)&&E!==(E=q[0].length+"")&&$(A,E),(!Z||W&8)&&Q(K,"width",q[3]+"%");const qe={};W&1&&(qe.checklistData=q[0]),M.$set(qe),W&4&&Y(L,q[2])},i(q){Z||(te(o.$$.fragment,q),te(u.$$.fragment,q),te(d.$$.fragment,q),te(M.$$.fragment,q),Z=!0)},o(q){ne(o.$$.fragment,q),ne(u.$$.fragment,q),ne(d.$$.fragment,q),ne(M.$$.fragment,q),Z=!1},d(q){q&&w(e),de(o),de(u),de(d),de(M),ve=!1,fe(je)}}}function Bn(t){const e=t.firmaResponsable.trim()!=="",l=t.fecha!=="",n=Object.values(t.calidad).some(s=>typeof s=="boolean"?s:typeof s=="string"&&s.trim()!=="");t.completado=e&&l&&n}const dl=t=>t.completado;function Hn(t,e,l){let n={cliente:"",fecha:new Date().toISOString().split("T")[0]},s=[{id:1,aspecto:"GENERAR ORDEN DE COMPRA",firmaResponsable:"",fecha:"",completado:!1,calidad:{datosCte:!1,checklist:!1,comodato:!1,garantia:!1,cortesia:!1,demo:!1,precioRenta:!1,folio:"",numProgServ:""}},{id:2,aspecto:"COORDINACION DE SERVICIOS",firmaResponsable:"",fecha:"",completado:!1,calidad:{validado:!1,valido:!1}},{id:3,aspecto:"PROGRAMADORES",firmaResponsable:"",fecha:"",completado:!1,calidad:{ids:!1,valido:!1}},{id:4,aspecto:"ALMAC√âN",firmaResponsable:"",fecha:"",completado:!1,calidad:{matCompleto:!1,numVale:"",hojaSalida:!1}},{id:5,aspecto:"CALIDAD",firmaResponsable:"",fecha:"",completado:!1,calidad:{observaciones:""}},{id:6,aspecto:"T√âCNICO INSTALADOR",firmaResponsable:"",fecha:"",completado:!1,calidad:{}},{id:7,aspecto:"SOPORTE T√âCNICO",firmaResponsable:"",fecha:"",completado:!1,calidad:{procesada:!1,pruebas:!1,notificacionCliente:!1}},{id:8,aspecto:"CALIDAD",firmaResponsable:"",fecha:"",completado:!1,calidad:{observaciones:""}},{id:9,aspecto:"SALIDA DE MATERIAL (INSTALACION DE STOCK)",firmaResponsable:"",fecha:"",completado:!1,calidad:{hojaSalida:""}},{id:10,aspecto:"FACTURACI√ìN",firmaResponsable:"",fecha:"",completado:!1,calidad:{}}],o="",a=0;function u(g,h){l(1,n[g]=h,n)}function r(g,h,I){const N=s.find(C=>C.id===g);if(N){if(h.includes(".")){const[C,P]=h.split(".");N[C][P]=I}else N[h]=I;Bn(N)}}function d(g){const h=s.find(I=>I.id===g);h&&(h.completado=!h.completado,h.completado&&!h.fecha&&(h.fecha=new Date().toISOString().split("T")[0]))}function p(){confirm("¬øCargar datos de ejemplo? Esto reemplazar√° los datos actuales.")&&(l(1,n={...qn}),l(0,s=JSON.parse(JSON.stringify(Vn))),l(2,o=zn))}function m(){const g={clientData:n,checklistData:s,comentarios:o,progress:a,timestamp:new Date().toISOString()};console.log("Datos del checklist:",g),alert(`Checklist guardado exitosamente. Progreso: ${a}%`)}function S(){confirm("¬øEst√°s seguro de que quieres limpiar todo el formulario?")&&(l(1,n={cliente:"",fecha:new Date().toISOString().split("T")[0]}),l(0,s=s.map(g=>({...g,firmaResponsable:"",fecha:"",completado:!1,calidad:Object.keys(g.calidad).reduce((h,I)=>(h[I]=typeof g.calidad[I]=="boolean"?!1:"",h),{})}))),l(2,o=""))}function _(){o=this.value,l(2,o)}const k=()=>window.print();return t.$$.update=()=>{t.$$.dirty&1&&l(3,a=Math.round(s.filter(g=>g.completado).length/s.length*100))},[s,n,o,a,u,r,d,p,m,S,_,k]}class Un extends me{constructor(e){super(),pe(this,e,Hn,Gn,re,{})}}function Jn(t){let e,l;return e=new xl({}),{c(){Ae(e.$$.fragment)},m(n,s){ce(e,n,s),l=!0},i(n){l||(te(e.$$.fragment,n),l=!0)},o(n){ne(e.$$.fragment,n),l=!1},d(n){de(e,n)}}}function Kn(t){let e,l,n,s,o,a,u,r;return e=new ln({}),o=new Un({}),{c(){Ae(e.$$.fragment),l=v(),n=f("button"),n.textContent="Cerrar sesi√≥n",s=v(),Ae(o.$$.fragment),Q(n,"position","fixed"),Q(n,"top","12px"),Q(n,"right","12px")},m(d,p){ce(e,d,p),O(d,l,p),O(d,n,p),O(d,s,p),ce(o,d,p),a=!0,u||(r=z(n,"click",Fl),u=!0)},i(d){a||(te(e.$$.fragment,d),te(o.$$.fragment,d),a=!0)},o(d){ne(e.$$.fragment,d),ne(o.$$.fragment,d),a=!1},d(d){d&&(w(l),w(n),w(s)),de(e,d),de(o,d),u=!1,r()}}}function Yn(t){let e,l,n,s;const o=[Kn,Jn],a=[];function u(r,d){return r[0].isAuthenticated?0:1}return e=u(t),l=a[e]=o[e](t),{c(){l.c(),n=rt()},m(r,d){a[e].m(r,d),O(r,n,d),s=!0},p(r,[d]){let p=e;e=u(r),e!==p&&(ml(),ne(a[p],1,1,()=>{a[p]=null}),hl(),l=a[e],l||(l=a[e]=o[e](r),l.c()),te(l,1),l.m(n.parentNode,n))},i(r){s||(te(l),s=!0)},o(r){ne(l),s=!1},d(r){r&&w(n),a[e].d(r)}}}function Zn(t,e,l){let n;return at(t,dt,s=>l(0,n=s)),[n]}class Qn extends me{constructor(e){super(),pe(this,e,Zn,Yn,re,{})}}new Qn({target:document.getElementById("app")});
